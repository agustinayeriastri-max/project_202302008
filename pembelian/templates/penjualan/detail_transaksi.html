{% extends 'base.html' %}
{% load penjualan_tags %}
{% load humanize %}
{% block title %}Detail Transaksi{% endblock %}

{% block content %}
<div class="container">
    <h2 class="mt-4">Detail Transaksi</h2>

    <p><strong>Tanggal:</strong> {{ transaksi.tanggal|date:"d-m-Y" }}</p>
    <p><strong>Supplier:</strong> {{ transaksi.supplier }}</p>
    <p><strong>Total:</strong> Rp{{ transaksi.total_harga|intcomma }}</p>

    <h4 class="mt-4">Rincian Barang:</h4>
    <table class="table table-bordered">
        <thead class="table-light">
            <tr>
                <th>Barang</th>
                <th>Jumlah</th>
                <th>Harga Beli</th>
                <th>Total</th>
                <th>Aksi</th>
            </tr>
        </thead>
        <tbody>
            {% for detail in detail_list %}
            <tr>
                <td>{{ detail.barang.nama }}</td>
                <td>{{ detail.jumlah }}</td>
                <td>Rp{{ detail.harga_beli|floatformat:2|intcomma }}</td>
                <td>Rp{{ detail.jumlah|multiply:detail.harga_beli|intcomma }}</td>
                <td>
                    <a href="{% url 'edit_detail' detail.id %}" class="btn btn-sm btn-warning">Edit</a>
                    <a href="{% url 'hapus_detail' detail.id %}" class="btn btn-sm btn-danger"
                       onclick="return confirm('Yakin ingin menghapus item ini?')">Hapus</a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" class="text-center">Belum ada detail pembelian.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <a href="{% url 'list_transaksi' %}" class="btn btn-secondary mt-3">â¬… Kembali ke Daftar Transaksi</a>
</div>
{% endblock %}
